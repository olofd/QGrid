var qGrid;!function(a){!function(a){a[a.IsEqualTo=0]="IsEqualTo",a[a.IsNotEqualTo=1]="IsNotEqualTo",a[a.IsLessThan=2]="IsLessThan",a[a.IsLessOrEqualTo=3]="IsLessOrEqualTo",a[a.IsGreaterThan=4]="IsGreaterThan",a[a.IsGreaterOrEqualTo=5]="IsGreaterOrEqualTo",a[a.IsIn=6]="IsIn",a[a.IsNotIn=7]="IsNotIn",a[a.BeginsWith=8]="BeginsWith",a[a.DoesNotBeginWith=9]="DoesNotBeginWith",a[a.EndsWith=10]="EndsWith",a[a.DoesNotEndWith=11]="DoesNotEndWith",a[a.Contains=12]="Contains",a[a.DoesNotContain=13]="DoesNotContain",a[a.ManualFilter=14]="ManualFilter"}(a.SearchOp||(a.SearchOp={}));a.SearchOp;!function(a){a[a.DateTime=0]="DateTime"}(a.DataType||(a.DataType={}));a.DataType;!function(a){a[a.None=0]="None",a[a.SearchTextBox=1]="SearchTextBox",a[a.TypeaheadTexBox=2]="TypeaheadTexBox",a[a.DatePickerTextBox=3]="DatePickerTextBox"}(a.IQGridColumnHeaderStyle||(a.IQGridColumnHeaderStyle={}));a.IQGridColumnHeaderStyle}(qGrid||(qGrid={})),angular.module("qGrid",["ngGrid","ui.bootstrap"]);var qGrid;!function(a){var b=function(){function a(a){"undefined"==typeof a&&(a="yyyy-MM-dd HH:mm:ss"),this.format=a}return Object.defineProperty(a.prototype,"template",{get:function(){return"/src/templates/nggrid/datetime-cell.html"},enumerable:!0,configurable:!0}),a}();a.DateTimeCellFormater=b;var c=function(){function a(a){this.gridModel=a}return a.getShortSearchOpertionForSearchOperationEnum=function(a){return 0===a.qGridColumnSettings.searchOperation?"eq":1===a.qGridColumnSettings.searchOperation?"ne":2===a.qGridColumnSettings.searchOperation?"lt":3===a.qGridColumnSettings.searchOperation?"le":4===a.qGridColumnSettings.searchOperation?"gt":5===a.qGridColumnSettings.searchOperation?"ge":6===a.qGridColumnSettings.searchOperation?"in":7===a.qGridColumnSettings.searchOperation?"ni":8===a.qGridColumnSettings.searchOperation?"bw":9===a.qGridColumnSettings.searchOperation?"bn":10===a.qGridColumnSettings.searchOperation?"ew":11===a.qGridColumnSettings.searchOperation?"en":12===a.qGridColumnSettings.searchOperation?"cn":13===a.qGridColumnSettings.searchOperation?"nc":14===a.qGridColumnSettings.searchOperation?"mf":"bw"},a}();a.QGridHelper=c}(qGrid||(qGrid={})),angular.module("qGrid").directive("ngEnter",function(){return function(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.$apply(function(){a.$eval(c.ngEnter,{event:b})}),b.preventDefault())})}}),angular.module("qGrid").directive("qGrid",function(){return{scope:{qGrid:"="},link:function(){},templateUrl:"src/templates/qgrid/qgrid.html",controller:"qGridController"}}),angular.module("qGrid").controller("qGridController",["$scope","$http","$q","$timeout",function(a,b,c,d){function e(a,b){for(var c in b)b[c]&&b[c].constructor&&b[c].constructor===Object?(a[c]=a[c]||{},arguments.callee(a[c],b[c])):a[c]=b[c];return a}console.log("loading");var f=function(){function a(a){var b=(Math.random().toString(16)+"000000000").substr(2,8);return a?"-"+b.substr(0,4)+"-"+b.substr(4,4):b}return a(void 0)+a(!0)+a(!0)+a(void 0)},g={headerRowHeight:70,footerRowHeight:40,headerRowTemplate:"src/templates/nggrid/qgrid-header-row-template.html",footerTemplate:"src/templates/nggrid/footer.html",enablePaging:!0,showFooter:!0,enablePinning:!1,multiSelect:!1,useExternalSorting:!0,i18n:"en",pagingOptions:{currentPage:1,pageSize:10,pageSizes:[10,20,50]}},h={buildServerRequestObject:function(a){var b=!1,c={requestInfo:{id:this.gridId,rows:g.pagingOptions.pageSize,rguid:f(),search:a,sf:function(){return g.sortInfo&&g.sortInfo.fields&&g.sortInfo.fields.length>0?g.sortInfo.fields[0]:void 0}(),sord:function(){return g.sortInfo&&g.sortInfo.directions&&g.sortInfo.directions.length>0?g.sortInfo.directions[0]:void 0}()},requestSearchInfo:function(){for(var a=!1,c=[],d=0;d<g.columnDefs.length;d++){var e=g.columnDefs[d];e.qGridColumnSettings.searchValue&&""!==e.qGridColumnSettings.searchValue&&(a=!0),c.push({n:e.field,so:qGrid.QGridHelper.getShortSearchOpertionForSearchOperationEnum(e),v:e.qGridColumnSettings.searchValue,pk:e.primaryKey}),b=a}return c}()};return c.requestInfo.search=b,c.requestInfo.page=b?1:g.pagingOptions.currentPage,c},performSearch:function(){return this.loadGrid()},requestData:function(a){return b.post(this.domain+this.urlDataRequest,a)},loadGrid:function(){var a=this;g.qGridSettings.isLoading=!0;var b=c.defer(),e=this.requestData(this.buildServerRequestObject());return e.success(function(c){var e=a;e.rows=c.rows,e.totalServerItems=c.records,b.resolve(c),c.page!==g.pagingOptions.currentPage&&(g.pagingOptions.manualPaging=!0,g.pagingOptions.currentPage=c.page,d(function(){g.pagingOptions.manualPaging=!1},0)),g.qGridSettings.isLoading=!1}),e.error(function(a){b.reject(a)}),b.promise},onSort:function(){return this.loadGrid()},onPaging:function(a){return a.manualPaging?void 0:this.loadGrid()},autoComplete:function(a){var c=this;return d(function(){var d=c.buildServerRequestObject();return d.requestInfo.acc=a.field,b.post(c.domain+c.urlAutoComplete,d).then(function(a){return a.data})},0)},exportGrid:function(a){var b=this.buildServerRequestObject();b.requestInfo.et=a,$.fileDownload(this.domain+this.urlExport,{httpMethod:"POST",data:b})},resetGrid:function(){return angular.forEach(g.columnDefs,function(a){a.qGridColumnSettings.searchValue=""}),g.qGridSettings.loadGrid()},enableAllExports:!1,enableFooterSettings:!1,isLoading:!1};g.qGridSettings=h,a.qGrid=e(g,a.qGrid),a.qGrid.data="qGrid.qGridSettings.rows",a.qGrid.totalServerItems="qGrid.qGridSettings.totalServerItems",console.log(a.qGrid),angular.forEach(a.qGrid.columnDefs,function(a){a.headerClass||(a.headerClass="qgrid-cell-header"),a.qGridColumnSettings&&a.qGridColumnSettings.cellFormatter&&(a.cellTemplate=a.qGridColumnSettings.cellFormatter.template),2===a.qGridColumnSettings.qgridColumnHeaderStyle&&(a.headerCellTemplate="/src/templates/nggrid/qgrid-typeahead-header-cell.html"),1===a.qGridColumnSettings.qgridColumnHeaderStyle&&(a.headerCellTemplate="/src/templates/nggrid/qgrid-searchtextbox-header-cell.html")}),a.qGrid.qGridSettings.modelComplete=!0,a.qGrid.qGridSettings.loadGrid(),a.$watch("qGrid.sortInfo",function(b,c){(b.directions[0]!==c.directions[0]||b.fields[0]!==c.fields[0])&&a.qGrid.qGridSettings.onSort(b,c)},!0),a.$watch("qGrid.pagingOptions",function(b,c){console.log("RunPag"),b!==c&&a.qGrid.qGridSettings.onPaging(b,c)},!0)}]),angular.module("qGrid").run(["$templateCache",function(a){"use strict";a.put("src/templates/qgrid/qgrid.html","<div ng-if=qGrid.qGridSettings.modelComplete class=qgrid ng-grid=qGrid></div>")}]),angular.module("ngGrid").run(["$templateCache",function(a){"use strict";a.put("src/templates/nggrid/datetime-cell.html",'<div class=ngCellText ng-class=col.colIndex()><span ng-cell-text="">{{row.getProperty(col.field) | date: col.colDef.qGridColumnSettings.cellFormatter.format}}</span></div>'),a.put("src/templates/nggrid/footer.html",'<div ng-show=showFooter class=qgrid-footer ng-style=footerStyle()><div class=container><div class=row><div class=col-xs-3><span class=btn-group><button type=button class="btn btn-default btn-sm" ng-click=$parent.$parent.qGrid.qGridSettings.resetGrid()><span class="fa fa-refresh"></span></button> <button type=button class="btn btn-default btn-sm dropdown-toggle" data-toggle=dropdown ng-if=$parent.$parent.qGrid.qGridSettings.enableFooterSettings><i class="fa fa-cogs"></i> <span class=caret></span></button><ul class=dropdown-menu><li ng-if="$parent.$parent.qGrid.qGridSettings.enableAllExports || $parent.$parent.qGrid.qGridSettings.enableExcelExport"><a href=# ng-click="$parent.$parent.qGrid.qGridSettings.exportGrid(\'Excel\')">Export to Excel</a></li><li ng-if="$parent.$parent.qGrid.qGridSettings.enableAllExports || $parent.$parent.qGrid.qGridSettings.enablePDFExport"><a href=# ng-click="$parent.$parent.qGrid.qGridSettings.exportGrid(\'PDF\')">Export to PDF</a></li><li ng-if="$parent.$parent.qGrid.qGridSettings.enableAllExports || $parent.$parent.qGrid.qGridSettings.enableCSVExport"><a href=# ng-click="$parent.$parent.qGrid.qGridSettings.exportGrid(\'CSV\')">Export to CSV</a></li><li ng-repeat="footerFunction in $parent.$parent.qGrid.qGridSettings.footerActions"><a href=# ng-click="footerFunction.callback(footerFunction, $parent.$parent.qGrid)">{{footerFunction.title}}</a></li></ul></span></div><div class=col-xs-6 style=text-align:center><div class=btn-group><button ng-click=pageToFirst() ng-disabled=cantPageBackward() type=button class="btn btn-default btn-sm"><i class="fa fa-step-backward qgrid-pager-button"></i></button> <button ng-click=pageBackward() ng-disabled=cantPageBackward() type=button class="btn btn-default btn-sm" style="border-right:none !important"><i class="fa fa-chevron-left qgrid-pager-button"></i></button> <span class=qgrid-pager-input><input class=ngPagerCurrent min=1 max={{currentMaxPages}} type=number style="width:49px; height: 30px" ng-model=pagingOptions.currentPage ng-disabled=$parent.$parent.qGrid.qGridSettings.isLoading></span> <button ng-click=pageForward() ng-disabled=cantPageForward() type=button class="btn btn-default btn-sm" style="border-left:none !important"><i class="fa fa-chevron-right qgrid-pager-button"></i></button> <button ng-click=pageToLast() ng-disabled=cantPageToLast() type=button class="btn btn-default btn-sm"><i class="fa fa-step-forward qgrid-pager-button"></i></button> <button type=button class="btn btn-default btn-sm dropdown-toggle" data-toggle=dropdown>{{pagingOptions.pageSize}} rows <span class=caret></span></button><ul class="dropdown-menu pull-right"><li ng-repeat="size in pagingOptions.pageSizes" ng-click="pagingOptions.pageSize = size;"><a href=#>{{size}} rows</a></li></ul></div></div><div class=col-xs-3><div class=qgrid-pager-container><span><span class=ngFooterTotalItems ng-class="{\'ngNoMultiSelect\': !multiSelect}"><span class=qgrid-label>{{maxRows()}} rows total</span> <span ng-show="filterText.length > 0" class=ngLabel>({{i18n.ngShowingItemsLabel}} {{totalFilteredItemsLength()}})</span></span> <span class=ngFooterSelectedItems ng-show=multiSelect><span class=qgrid-label>{{i18n.ngSelectedItemsLabel}} {{selectedItems.length}}</span></span></span> <span tooltip-placement=right tooltip="I spin when the grid is loading!"><i class="qgrid-spinner fa fa-cog" ng-class="{\'fa-spin\' : $parent.$parent.qGrid.qGridSettings.isLoading}"></i></span></div></div></div></div></div>'),a.put("src/templates/nggrid/qgrid-header-row-template.html",'<div ng-style="{ height: col.headerRowHeight }" ng-repeat="col in renderedColumns" ng-class=col.colIndex() class=ngHeaderCell><div class=ngVerticalBar ng-style="{height: col.headerRowHeight}" ng-class="{ ngVerticalBarVisible: !$last }">&nbsp;</div><div ng-header-cell=""></div></div>'),a.put("src/templates/nggrid/qgrid-pager-steppable.html",'<ul class="pagination pagination-sm qgrid-pager"><li><a href=# ng-click=pageToFirst() ng-disabled=cantPageBackward()><span class="glyphicon glyphicon-step-backward"></span></a></li><li><a href=# ng-click=pageBackward() ng-disabled=cantPageBackward()><span class="glyphicon glyphicon-chevron-left"></span></a></li><li ng-repeat="pageLink in pageLinks" ng-show=!pageLink.hidden ng-class="{\'active\' : pageLink.active}"><a href=# ng-click=setCurrentPage(pageLink.value)>{{pageLink.title}}</a></li><li><a href=# ng-click=pageForward() ng-disabled=cantPageForward()><span class="glyphicon glyphicon-chevron-right"></span></a></li><li><a href=# ng-click=pageToLast() ng-disabled=cantPageToLast()><span class="glyphicon glyphicon-step-forward"></span></a></li></ul>'),a.put("src/templates/nggrid/qgrid-searchtextbox-header-cell.html",'<div class="ngHeaderSortColumn {{col.headerClass}} qgrid-header-cell" ng-style="{\'cursor\': col.cursor}" ng-class="{ \'ngSorted\': !noSortVisible }"><div ng-click=col.sort($event) ng-class="\'colt\' + col.index" class=ngHeaderText>{{col.displayName}}</div><form class="bs-example bs-example-form" role=form><span style="display:inline-block; padding: 0px 5px 0px 5px; width: 100%"><div class=input-group style="width: 100%"><input type=text class=form-control placeholder={{col.displayName}} ng-enter=$parent.qGrid.qGridSettings.performSearch() ng-model=col.colDef.qGridColumnSettings.searchValue></div></span></form><div class=ngSortButtonDown ng-show=col.showSortButtonDown()></div><div class=ngSortButtonUp ng-show=col.showSortButtonUp()></div><div class=ngSortPriority>{{col.sortPriority}}</div><div ng-class="{ ngPinnedIcon: col.pinned, ngUnPinnedIcon: !col.pinned }" ng-click=togglePin(col) ng-show=col.pinnable></div></div><div ng-show=col.resizable class=ngHeaderGrip ng-click=col.gripClick($event) ng-mousedown=col.gripOnMouseDown($event)></div>'),a.put("src/templates/nggrid/qgrid-typeahead-header-cell.html",'<div class="ngHeaderSortColumn {{col.headerClass}} typeahead" ng-style="{\'cursor\': col.cursor}" ng-class="{ \'ngSorted\': !noSortVisible }"><div ng-click=col.sort($event) ng-class="\'colt\' + col.index" class=ngHeaderText>{{col.displayName}}</div><span style="display:inline-block; padding: 0 5px 0 5px; width: 100%"><input type=text ng-model=col.colDef.qGridColumnSettings.searchValue placeholder={{col.displayName}} ng-dblclick=openTypeAhead() typeahead="address for address in $parent.qGrid.qGridSettings.autoComplete(col.colDef) | filter:$viewValue" typeahead-editable=true typeahead-loading=loadingLocations class=form-control ng-enter=$parent.qGrid.qGridSettings.performSearch()></span><div class=ngSortButtonDown ng-show=col.showSortButtonDown()></div><div class=ngSortButtonUp ng-show=col.showSortButtonUp()></div><div class=ngSortPriority>{{col.sortPriority}}</div><div ng-class="{ ngPinnedIcon: col.pinned, ngUnPinnedIcon: !col.pinned }" ng-click=togglePin(col) ng-show=col.pinnable></div></div><div ng-show=col.resizable class=ngHeaderGrip ng-click=col.gripClick($event) ng-mousedown=col.gripOnMouseDown($event)></div>')}]);